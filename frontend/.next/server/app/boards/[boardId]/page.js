(()=>{var e={};e.id=508,e.ids=[508],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4945:(e,t,s)=>{Promise.resolve().then(s.bind(s,64383))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28559:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64383:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nishanthvaidya/Desktop/OOD/Balekai/frontend/app/boards/[boardId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nishanthvaidya/Desktop/OOD/Balekai/frontend/app/boards/[boardId]/page.tsx","default")},64866:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let r=s(51060).A.create({baseURL:process.env.NEXT_PUBLIC_API_BASE_URL||"http://balekai-alb-new-626347040.us-east-1.elb.amazonaws.com/",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e,e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response&&e.response.status,Promise.reject(e)));let a=r},70097:(e,t,s)=>{Promise.resolve().then(s.bind(s,95261))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85226:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=s(65239),a=s(48088),i=s(88170),d=s.n(i),n=s(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let o={children:["",{children:["boards",{children:["[boardId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,64383)),"/Users/nishanthvaidya/Desktop/OOD/Balekai/frontend/app/boards/[boardId]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/Users/nishanthvaidya/Desktop/OOD/Balekai/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/nishanthvaidya/Desktop/OOD/Balekai/frontend/app/boards/[boardId]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/boards/[boardId]/page",pathname:"/boards/[boardId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},94735:e=>{"use strict";e.exports=require("events")},95261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(60687),a=s(43210),i=s(16189),d=s(85814),n=s.n(d),l=s(64866),o=s(47033),c=s(28559),u=s(19540);function m(){let e=(0,i.useParams)(),t=e?.boardId,[s,d]=(0,a.useState)(null),[m,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(""),[h,b]=(0,a.useState)({}),[f,y]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(-1),[k,C]=(0,a.useState)(!1),[D]=(0,a.useState)("test-user"),[A,S]=(0,a.useState)(null),[P,$]=(0,a.useState)([]),[q,I]=(0,a.useState)([]),_=async e=>{if(A)try{if(await l.A.put(`/cards/${A.id}/assign?userId=${e}`),S({...A,assignedUser:q.find(t=>t.id===e)}),s){let t={...s};t.lists=t.lists.map(t=>({...t,cards:t.cards.map(t=>t.id===A.id?{...t,assignedUser:q.find(t=>t.id===e)}:t)})),d(t)}}catch(t){if(console.error("Failed to assign user:",t),s&&A){let t={...s};t.lists=t.lists.map(t=>({...t,cards:t.cards.map(t=>t.id===A.id?{...t,assignedUser:q.find(t=>t.id===e)}:t)})),d(t)}}},L=async()=>{if(A)try{await l.A.put(`/cards/${A.id}/update-metadata`,{title:A.title,label:A.label});let e={...s};e.lists=e.lists.map(e=>({...e,cards:e.cards.map(e=>e.id===A.id?{...e,...A}:e)})),d(e),S(null)}catch(e){if(console.error("Failed to save metadata:",e),s&&A){let e={...s};e.lists=e.lists.map(e=>({...e,cards:e.cards.map(e=>e.id===A.id?{...e,...A}:e)})),d(e),S(null)}}},U=async()=>{if(A&&s)try{A.id>0&&await l.A.delete(`/cards/${A.id}`);let e={...s};e.lists=e.lists.map(e=>({...e,cards:e.cards.filter(e=>e.id!==A.id)})),d(e),S(null)}catch(t){console.error("Failed to delete card:",t);let e={...s};e.lists=e.lists.map(e=>({...e,cards:e.cards.filter(e=>e.id!==A.id)})),d(e),S(null)}},B=async e=>{if(A&&s)try{await l.A.put(`/cards/${A.id}/transition?newState=${e}`);let t=s.lists.find(t=>t.name.toLowerCase()===e.toLowerCase());if(!t)return;await l.A.put(`/cards/${A.id}/move?listId=${t.id}`);let r={...s};r.lists=r.lists.map(s=>s.cards.some(e=>e.id===A.id)?{...s,cards:s.cards.filter(e=>e.id!==A.id)}:s.id===t.id?{...s,cards:[...s.cards,{...A,currentState:e}]}:s),d(r),S({...A,currentState:e})}catch(t){if(console.error("Failed to change card state:",t),s&&A){let t=s.lists.find(t=>t.name.toLowerCase()===e.toLowerCase());if(!t)return;let r={...s};r.lists=r.lists.map(s=>s.cards.some(e=>e.id===A.id)?{...s,cards:s.cards.filter(e=>e.id!==A.id)}:s.id===t.id?{...s,cards:[...s.cards,{...A,currentState:e}]}:s),d(r),S({...A,currentState:e})}}},F=async e=>{try{let t=await l.A.get(`/cards/${e.id}/history`);$(t.data),S(e)}catch(t){console.error("Failed to fetch card history:",t),$([]),S(e)}},O=()=>{p.trim()&&s&&(w(N-1),d({...s,lists:[...s.lists,{id:N,name:p,cards:[]}]}),g(""),j(!1))},T=async e=>{let t=h[e];if(t?.trim()&&s)try{let r=(await l.A.post("/cards",{title:t,label:"Default",currentState:"To Do",list:{id:e}})).data,a={...s};a.lists=a.lists.map(t=>t.id===e?{...t,cards:[...t.cards,r]}:t),d(a),b(t=>({...t,[e]:""}))}catch(n){console.error("❌ Failed to add new card:",n),w(N-1);let r=s.lists.find(t=>t.id===e);if(!r)return;let a={id:N,title:t,currentState:r.name,label:"Default"},i={...s};i.lists=i.lists.map(t=>t.id===e?{...t,cards:[...t.cards,a]}:t),d(i),b(t=>({...t,[e]:""}))}},E=(e,t)=>{y({card:e,fromListId:t})},z=e=>{e.preventDefault()},G=async e=>{if(f&&s){if(f.fromListId===e)return void y(null);try{let t=s.lists.find(t=>t.id===e);if(!t)return;f.card.id>0&&(await l.A.put(`/cards/${f.card.id}/move?listId=${e}`),await l.A.put(`/cards/${f.card.id}/transition?newState=${t.name}`));let r={...s};r.lists=r.lists.map(s=>s.id===f.fromListId?{...s,cards:s.cards.filter(e=>e.id!==f.card.id)}:s.id===e?{...s,cards:[...s.cards,{...f.card,currentState:t.name}]}:s),d(r),y(null)}catch(a){console.error("Failed to move card:",a);let t=s.lists.find(t=>t.id===e);if(!t)return;let r={...s};r.lists=r.lists.map(s=>s.id===f.fromListId?{...s,cards:s.cards.filter(e=>e.id!==f.card.id)}:s.id===e?{...s,cards:[...s.cards,{...f.card,currentState:t.name}]}:s),d(r),y(null)}}},R=e=>{let t=e.toLowerCase();if(t.includes("bug")||t.includes("error"))return"bg-red-100 text-red-800";if(t.includes("feature"))return"bg-green-100 text-green-800";if(t.includes("improvement"))return"bg-purple-100 text-purple-800";if(t.includes("documentation"))return"bg-blue-100 text-blue-800";if("default"===t)return"bg-gray-100 text-gray-800";else return"bg-indigo-100 text-indigo-800"},M=e=>e?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",K=e=>{if(!s)return;let t={...s};t.lists=t.lists.filter(t=>t.id!==e),d(t)},X=["To Do","In Progress","Blocked","Review","Done"];return s?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex",children:[(0,r.jsxs)("div",{className:`bg-white border-r border-gray-200 transition-all duration-300 ease-in-out ${k?"w-64":"w-0 overflow-hidden"}`,children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"font-bold text-gray-800",children:"All Boards"}),(0,r.jsx)("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)(o.A,{size:18})})]}),(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)(n(),{href:"/boards",className:"flex items-center p-2 mb-2 text-gray-800 hover:bg-gray-100 rounded-md",children:[(0,r.jsx)(c.A,{size:16,className:"mr-2"}),(0,r.jsx)("span",{className:"font-medium",children:"Back to All Boards"})]}),(0,r.jsx)("div",{className:"mt-4 mb-2 px-2",children:(0,r.jsx)("h3",{className:"text-xs uppercase tracking-wider text-gray-500 font-semibold",children:"Your Boards"})}),m.map(e=>(0,r.jsx)(n(),{href:`/boards/${e.id}`,className:`block p-2 mb-1 rounded text-gray-800 font-medium hover:bg-gray-100 ${e.id===Number(t)?"bg-indigo-50 text-indigo-700":""}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"truncate",children:e.name}),(0,r.jsx)("span",{className:`ml-2 px-1.5 py-0.5 text-xs rounded-full ${M(e.isPrivate)}`,children:e.isPrivate?"\uD83D\uDD12":"\uD83C\uDF10"})]})},e.id))]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(u.F,{username:s.ownerName||"User",sidebarOpen:k,onSidebarToggle:()=>C(!k),title:s.name}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-6",children:[s.lists.map(e=>(0,r.jsxs)("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 flex flex-col transition-all duration-200 ${f?"ring-2 ring-offset-2 ring-indigo-200":""}`,onDragOver:z,onDrop:()=>G(e.id),children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 rounded-t-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"bg-gray-200 text-gray-700 text-xs font-medium px-2 py-0.5 rounded-full",children:e.cards.length}),!X.includes(e.name)&&(0,r.jsx)("button",{onClick:()=>K(e.id),className:"text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-gray-100",title:"Delete list",children:(0,r.jsx)("span",{className:"text-sm",children:"\xd7"})})]})]})}),(0,r.jsxs)("div",{className:"p-3 flex-1 overflow-y-auto max-h-[calc(100vh-250px)]",children:[e.cards.map(t=>(0,r.jsxs)("div",{className:`bg-white border border-gray-200 p-3 rounded-md mb-2 shadow-sm hover:shadow cursor-pointer transform transition-transform duration-100 ${f?.card.id===t.id?"opacity-50":"hover:-translate-y-1"}`,onClick:()=>F(t),draggable:!0,onDragStart:()=>E(t,e.id),children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:t.title}),(0,r.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-1",children:[t.label&&(0,r.jsxs)("span",{className:`inline-flex items-center px-2 py-1 text-xs rounded-full ${R(t.label)}`,children:[(0,r.jsx)("span",{className:"mr-1 text-xs",children:"\uD83C\uDFF7️"}),t.label]}),(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:[(0,r.jsx)("span",{className:"mr-1 text-xs",children:"\uD83D\uDCCB"}),t.currentState]}),t.assignedUser&&(0,r.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[(0,r.jsx)("span",{className:"mr-1 text-xs",children:"\uD83D\uDC64"}),t.assignedUser.name]})]}),t.id<0&&(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"Temporary card"})]},t.id)),"To Do"===e.name&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("input",{type:"text",placeholder:"Add a card...",className:"w-full p-2 border border-gray-300 rounded-md text-sm text-gray-800 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",value:h[e.id]||"",onChange:t=>b({...h,[e.id]:t.target.value}),onKeyDown:t=>{"Enter"===t.key&&T(e.id)}})}),(0,r.jsx)("button",{onClick:()=>T(e.id),className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"+ Add Card"})]})]})]},e.id)),v?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Enter list title...",className:"w-full p-2 border border-gray-300 rounded-md mb-3 text-gray-800 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",value:p,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O()},autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:O,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Add List"}),(0,r.jsx)("button",{onClick:()=>{j(!1),g("")},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Cancel"})]})]}):(0,r.jsxs)("button",{onClick:()=>j(!0),className:"bg-white/80 hover:bg-white border border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center text-gray-500 hover:text-gray-700 h-24 transition-all duration-200 hover:border-indigo-300",children:[(0,r.jsx)("span",{className:"text-lg mr-2",children:"+"}),(0,r.jsx)("span",{className:"font-medium",children:"Add another list"})]})]})}),A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:()=>S(null)}),(0,r.jsxs)("div",{className:`fixed top-0 right-0 w-full sm:w-[450px] h-full bg-white shadow-2xl p-6 z-50 overflow-y-auto transition-transform duration-300 ease-in-out ${A?"translate-x-0":"translate-x-full"}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Card Details"}),(0,r.jsx)("button",{onClick:()=>S(null),className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:(0,r.jsx)("span",{className:"text-xl",children:"\xd7"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,r.jsx)("input",{type:"text",value:A.title,onChange:e=>S({...A,title:e.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border text-gray-800"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),(0,r.jsx)("input",{type:"text",value:A.label,onChange:e=>S({...A,label:e.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border text-gray-800"}),(0,r.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:["Bug","Feature","Improvement","Documentation","Default"].map(e=>(0,r.jsx)("button",{onClick:()=>S({...A,label:e}),className:`px-2 py-1 text-xs rounded-full ${R(e)} transition-colors duration-200`,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,r.jsx)("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border text-gray-800",value:A.currentState,onChange:e=>B(e.target.value),children:s.lists.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),(0,r.jsxs)("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border text-gray-800",value:A.assignedUser?.id||"",onChange:e=>_(Number(e.target.value)),children:[(0,r.jsx)("option",{value:"",children:"-- Unassigned --"}),q.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Activity Log"}),(0,r.jsx)("div",{className:"bg-gray-50 rounded-md p-3 max-h-48 overflow-y-auto border border-gray-200",children:P.length>0?(0,r.jsx)("ul",{className:"space-y-2",children:P.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,r.jsx)("span",{className:"text-gray-400 mr-2",children:"•"}),(0,r.jsx)("span",{children:e})]},t))}):(0,r.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No activity recorded yet."})})]}),A.id<0&&(0,r.jsx)("div",{className:"text-xs text-gray-400 bg-gray-100 p-2 rounded-md",children:"This is a temporary card that exists only in the frontend."}),(0,r.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:L,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200",children:"Save Changes"}),(0,r.jsx)("button",{onClick:U,className:"w-full mt-2 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",children:"Delete Card"})]})]})]})]})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-500 border-blue-200 rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-xl font-medium text-gray-700",children:"Loading board..."})]})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,985,658,418,60,3],()=>s(85226));module.exports=r})();